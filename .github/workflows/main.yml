name: Unity CI/CD - Main push (Format check, Test Runner)

on:
  push:
    branches: [ "main" ]
    
jobs:
  format:
    name: Format check üóíÔ∏è
    runs-on: ubuntu-latest
    defaults:
      run: 
        working-directory: "projekt/Assets"
    steps:
      - uses: actions/checkout@v3
      - name: Installing .NET...
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: 8.0.x
      - name: Installing dependencies...
        run: dotnet tool install -g csharpier
      - name: Restoring dependencies...
        run: dotnet tool restore
      - name: Running format...
        run: dotnet csharpier --check
  Unity_CICD_MAIN:
    runs-on: ubuntu-latest
    steps:
      - name: "Checking out"
        uses: actions/checkout@v3
      - name: "Calling format check..."
        uses: ./.github/workflows/basic/format.yml
      - name: "Calling test runner..."
        uses: ./.github/workflows/basic/test.yml
